name: Daily Image Crawler

# 언제 실행할지 설정합니다.
on:
  schedule:
    - cron: '0 0 * * *'  # 매일 한국 시간 오전 9시 (UTC 00:00)
  workflow_dispatch:      # [Actions] 탭에서 수동으로 실행 버튼을 활성화합니다.

jobs:
  build:
    runs-on: ubuntu-latest # 가상의 리눅스 컴퓨터를 빌립니다.

    steps:
      # 1. 저장소의 코드를 가상 컴퓨터로 가져옵니다.
      - name: Checkout code
        uses: actions/checkout@v3

      # 2. 파이썬 설치
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # 3. 필요한 라이브러리 설치
      - name: Install dependencies
        run: |
          pip install requests google-api-python-client google-auth

      # 4. 파이썬 스크립트 실행
      - name: Run script
        env:
          # GitHub Secrets에 저장한 값을 환경 변수로 불러옵니다.
          UNSPLASH_ACCESS_KEY: ${{ secrets.UNSPLASH_ACCESS_KEY }}
          GDRIVE_SERVICE_ACCOUNT_JSON: ${{ secrets.GDRIVE_SERVICE_ACCOUNT_JSON }}
        run: python main.py
